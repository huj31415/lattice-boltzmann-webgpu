<!-- 99% credit to chatgpt -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>2D Lattice Boltzmann Simulation with WebGPU</title>
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <canvas id="canvas"></canvas>
  <button id="toggleSettings">&gt;</button>
  <div id="controls" class="right-dark">
    <h2>2D LBM on WebGPU</h2>
    <div class="control-group">
      <select id="visualization">
        <option value="curl">Curl</option>
        <option value="schlieren">Schlieren</option>
        <option value="speed">Speed</option>
        <option value="density">Density</option>
      </select>
      <label for="visualization">Visualization mode</label>
    </div>
    <hr>
    <div class="control-group">
      <div>
        <input id="velocity" type="range" min="0" max="1" step="0.01" value="0.1">
        <label for="velocity">Velocity:
          <span id="velocityValue">0.10</span>
        </label>
      </div>
      <div>
        <input id="viscosity" type="range" min="0.005" max="0.5" step="0.005" value="0.05">
        <label for="viscosity">Viscosity:
          <span id="viscosityValue">0.05</span>
        </label>
      </div>
      <div>
        <input id="noSlip" type="checkbox" checked>
        <label for="noSlip">No slip top/bottom</label>
      </div>
      <button id="reinit" class="fullwidth">Restart sim</button>
    </div>
    <hr>
    <div class="control-group">
      <input id="simSpeed" type="range" min="0" max="50" step="1" value="1">
      <label for="simSpeed">Sim speed:
        <span id="simSpeedValue">1</span>
      </label>
      <input id="simRes" type="range" min="1" max="5" step="1" value="1">
      <label for="simRes">Resolution:
        <span id="simResValue">1</span>
      </label>
    </div>
    <hr>
    <div class="control-group">
      <div>
        <label for="barrierUpload">Upload image</label>
        <input id="barrierUpload" type="file" accept="image/*">
      </div>
      <div>
        <input id="threshold" type="range" min="0" max="1" step="0.01" value="0.5">
        <label for="threshold">Threshold:
          <span id="thresholdValue">0.50</span>
        </label>
      </div>
      <div>
        <input id="imageScale" type="range" min="0.1" max="1" step="0.01" value=".5">
        <label for="imageScale">Image scale</label>
      </div>
      <div>
        <input id="barrierInvert" type="checkbox">
        <label for="barrierInvert">Invert image</label>
      </div>
      <div>
        <button id="applyBarrierImage">Apply image</button>
        <button id="clearBarriers">Clear barriers</button>
      </div>
    </div>
    <p>Click on the canvas to toggle barrier cells</p>
  </div>
  <script src="./lbmgpu.js"></script>
</body>

</html>